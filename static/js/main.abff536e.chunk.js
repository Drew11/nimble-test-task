(this["webpackJsonpnimble-test-task"]=this["webpackJsonpnimble-test-task"]||[]).push([[0],{24:function(t,e,n){},26:function(t,e,n){},27:function(t,e,n){},28:function(t,e,n){"use strict";n.r(e);var c=n(1),a=n(0),r=n.n(a),i=n(5),s=n.n(i),o=n(4);n(24);var u=n(3),d=n.n(u),l=(n(26),n.p+"static/media/play_circle_outline-24px.39fb5126.svg"),j=n.p+"static/media/stop_circle-24px.12a98abf.svg",m=function(t){var e=t.tracker,n=Object(o.b)();Object(a.useEffect)((function(){var t=d()().unix();if(e.active){e.minutes>59&&n(function(t){return{type:"UPDATE_HOUR",payload:{id:t}}}(e.id)),e.seconds>59&&n(function(t){return{type:"UPDATE_MINUTE",payload:{id:t}}}(e.id));var c=setInterval((function(){n(function(t,e,n){return{type:"UPDATE_SECOND",payload:{id:t,currentSecond:e,startingTime:n}}}(e.id,d()().unix(),t))}),1e3);return function(){return clearInterval(c)}}}),[e.active,e.seconds,e.minutes]);var r=function(t){var e=t.toString();return e.length<2&&(e="0".concat(e)),e},i=e.active?"play":"stop";return Object(c.jsxs)("div",{className:"tracker ".concat(i),children:[Object(c.jsx)("div",{className:"tracker-name",children:Object(c.jsx)("span",{children:e.name?e.name:"name"})}),Object(c.jsx)("div",{className:"tracker-time",children:"".concat(r(e.hours),": ").concat(r(e.minutes),":  ").concat(r(e.seconds))}),Object(c.jsxs)("div",{className:"tracker-controls-btn",children:[Object(c.jsx)("img",{src:e.active?j:l,className:"tracker-controls-btn",onClick:function(){e.active?n({type:"STOP_TRACKER",payload:{id:e.id}}):n(function(t,e){return{type:"START_TRACKER",payload:{id:t,startingTime:e}}}(e.id,d()().unix()))}}),Object(c.jsx)("div",{className:"remove",onClick:function(){n(function(t){return{type:"REMOVE_TRACKER",payload:t}}(e))}})]})]})};n(27);var p=function(){var t=Object(o.b)(),e=Object(o.c)((function(t){return t})),n=function(n){var c=d()().toString(),a=""===n.target.value||void 0===n.target.value?c:n.target.value,r={id:"".concat(c,"-").concat(e.length),name:a,seconds:0,minutes:0,hours:0,startingTime:d()().unix(),active:!0,created:d()().unix()};"Enter"!==n.code&&"Enter"!==n.key&&"click"!==n.type||t({type:"ADD_TRACKER",payload:r})};return Object(c.jsxs)("div",{className:"add-tracker",children:[Object(c.jsx)("input",{type:"text",className:"add-tracker-input",onKeyDown:n,placeholder:"Enter tracker name"}),Object(c.jsx)("div",{className:"add-tracker-btn",onClick:n})]})};var b=function(){var t=Object(o.c)((function(t){return t})).map((function(t,e){return Object(c.jsx)(m,{tracker:t},e)}));return Object(c.jsxs)("div",{className:"App",children:[Object(c.jsx)("header",{className:"App-header",children:Object(c.jsx)("h1",{children:"tracker"})}),Object(c.jsx)("main",{children:Object(c.jsxs)("div",{className:"content",children:[Object(c.jsx)(p,{}),Object(c.jsx)("div",{className:"tracker-list",children:t})]})})]})},O=n(6),f=n(2),v=n(12);var y=function(){try{var t=window.localStorage.getItem("state");if(null===t)return;return JSON.parse(t).map((function(t){if(t.active){var e=d()().unix()-t.startingTime,n=Math.floor(e/60/60),c=Math.floor(e/60),a=e-(60*n*60+60*c);return c+t.minutes>59&&(n+=1,c=t.minutes+c-60),a+t.seconds>59&&(c+=1,a=t.seconds+a-60),console.log(n,c,a,t.startingTime),Object(f.a)(Object(f.a)({},t),{},{seconds:a,minutes:c,hours:t.hours+n})}return t}))}catch(e){return}}(),h=Object(O.b)((function(t,e){switch(e.type){case"ADD_TRACKER":return[].concat(Object(v.a)(t),[e.payload]);case"REMOVE_TRACKER":return t.filter((function(t){return t.id!==e.payload.id}));case"START_TRACKER":return t.map((function(t){return t.id===e.payload.id?Object(f.a)(Object(f.a)({},t),{},{active:!0}):t}));case"STOP_TRACKER":return t.map((function(t){return t.id===e.payload.id?Object(f.a)(Object(f.a)({},t),{},{active:!1}):t}));case"UPDATE_SECOND":return t.map((function(t){return t.id===e.payload.id?Object(f.a)(Object(f.a)({},t),{},{seconds:t.seconds+(e.payload.currentSecond-e.payload.startingTime),startingTime:e.payload.startingTime}):t}));case"UPDATE_MINUTE":return t.map((function(t){return t.id===e.payload.id?Object(f.a)(Object(f.a)({},t),{},{seconds:0,minutes:t.minutes+1}):t}));case"UPDATE_HOUR":return t.map((function(t){return t.id===e.payload.id?Object(f.a)(Object(f.a)({},t),{},{minutes:0,hours:t.hours+1}):t}));default:return t}}),y||[]);h.subscribe((function(){!function(t){try{var e=JSON.stringify(t);window.localStorage.setItem("state",e)}catch(n){}}(h.getState())}));var x=h;s.a.render(Object(c.jsx)(r.a.StrictMode,{children:Object(c.jsx)(o.a,{store:x,children:Object(c.jsx)(b,{})})}),document.getElementById("root"))}},[[28,1,2]]]);
//# sourceMappingURL=main.abff536e.chunk.js.map